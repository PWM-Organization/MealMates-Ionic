<ion-content class="register-content" [fullscreen]="true">
  <div class="register-container">
    <!-- Header con logo -->
    <div class="header-section">
      <div class="logo-container">
        <ion-icon name="restaurant" class="logo-icon"></ion-icon>
        <h1 class="app-title">MealMates</h1>
        <p class="app-subtitle">Tu compañero culinario perfecto</p>
      </div>
    </div>

    <!-- Formulario de registro -->
    <div class="form-section">
      <div class="welcome-text">
        <h2>¡Únete a nosotros!</h2>
        <p>Crea tu cuenta y descubre increíbles recetas</p>
      </div>

      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
        <!-- Campos de nombre -->
        <div class="name-row">
          <div class="input-group half-width">
            <ion-item class="input-item" [class.has-error]="firstNameError">
              <ion-icon name="person-outline" slot="start" class="input-icon"></ion-icon>
              <ion-label position="stacked">Nombre</ion-label>
              <ion-input
                type="text"
                formControlName="firstName"
                placeholder="Tu nombre"
                [clearInput]="true"
                autocomplete="given-name"
              ></ion-input>
            </ion-item>
            <div class="error-message" *ngIf="firstNameError">
              {{ firstNameError }}
            </div>
          </div>

          <div class="input-group half-width">
            <ion-item class="input-item" [class.has-error]="lastNameError">
              <ion-icon name="person-outline" slot="start" class="input-icon"></ion-icon>
              <ion-label position="stacked">Apellidos</ion-label>
              <ion-input
                type="text"
                formControlName="lastName"
                placeholder="Tus apellidos"
                [clearInput]="true"
                autocomplete="family-name"
              ></ion-input>
            </ion-item>
            <div class="error-message" *ngIf="lastNameError">
              {{ lastNameError }}
            </div>
          </div>
        </div>

        <!-- Campo de email -->
        <div class="input-group">
          <ion-item class="input-item" [class.has-error]="emailError">
            <ion-icon name="mail-outline" slot="start" class="input-icon"></ion-icon>
            <ion-label position="stacked">Email</ion-label>
            <ion-input
              type="email"
              formControlName="email"
              placeholder="ejemplo@email.com"
              [clearInput]="true"
              autocomplete="email"
            ></ion-input>
          </ion-item>
          <div class="error-message" *ngIf="emailError">
            {{ emailError }}
          </div>
        </div>

        <!-- Campo de contraseña -->
        <div class="input-group">
          <ion-item class="input-item" [class.has-error]="passwordError">
            <ion-icon name="lock-closed-outline" slot="start" class="input-icon"></ion-icon>
            <ion-label position="stacked">Contraseña</ion-label>
            <ion-input
              [type]="showPassword() ? 'text' : 'password'"
              formControlName="password"
              placeholder="Tu contraseña"
              autocomplete="new-password"
            ></ion-input>
            <ion-button fill="clear" slot="end" (click)="togglePasswordVisibility()" class="password-toggle">
              <ion-icon [name]="showPassword() ? 'eye-off-outline' : 'eye-outline'" color="medium"></ion-icon>
            </ion-button>
          </ion-item>
          <div class="error-message" *ngIf="passwordError">
            {{ passwordError }}
          </div>
        </div>

        <!-- Campo de confirmar contraseña -->
        <div class="input-group">
          <ion-item class="input-item" [class.has-error]="confirmPasswordError">
            <ion-icon name="lock-closed-outline" slot="start" class="input-icon"></ion-icon>
            <ion-label position="stacked">Confirmar Contraseña</ion-label>
            <ion-input
              [type]="showConfirmPassword() ? 'text' : 'password'"
              formControlName="confirmPassword"
              placeholder="Repite tu contraseña"
              autocomplete="new-password"
            ></ion-input>
            <ion-button fill="clear" slot="end" (click)="toggleConfirmPasswordVisibility()" class="password-toggle">
              <ion-icon [name]="showConfirmPassword() ? 'eye-off-outline' : 'eye-outline'" color="medium"></ion-icon>
            </ion-button>
          </ion-item>
          <div class="error-message" *ngIf="confirmPasswordError">
            {{ confirmPasswordError }}
          </div>
        </div>

        <!-- Botón de registro -->
        <ion-button
          expand="block"
          type="submit"
          [disabled]="registerForm.invalid || isLoading()"
          class="register-button"
          size="large"
        >
          <ion-icon name="person-add-outline" slot="start" *ngIf="!isLoading()"></ion-icon>
          <ion-spinner name="crescent" *ngIf="isLoading()"></ion-spinner>
          {{ isLoading() ? 'Creando cuenta...' : 'Crear Cuenta' }}
        </ion-button>
      </form>
    </div>

    <!-- Footer con enlace a login -->
    <div class="footer-section">
      <div class="login-link">
        <p>¿Ya tienes una cuenta?</p>
        <ion-button fill="clear" (click)="goToLogin()" color="primary">
          <strong>Inicia sesión aquí</strong>
        </ion-button>
      </div>
    </div>
  </div>

  <!-- Background decorativo -->
  <div class="background-decoration">
    <div class="decoration-circle circle-1"></div>
    <div class="decoration-circle circle-2"></div>
    <div class="decoration-circle circle-3"></div>
  </div>
</ion-content>
